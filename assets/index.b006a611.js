var le=Object.defineProperty,de=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var U=(e,n,r)=>n in e?le(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,b=(e,n)=>{for(var r in n||(n={}))z.call(n,r)&&U(e,r,n[r]);if(D)for(var r of D(n))j.call(n,r)&&U(e,r,n[r]);return e},S=(e,n)=>de(e,ue(n));var A=(e,n)=>{var r={};for(var a in e)z.call(e,a)&&n.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&D)for(var a of D(e))n.indexOf(a)<0&&j.call(e,a)&&(r[a]=e[a]);return r};import{c as w,a as d,b as W,d as _,e as me,f as k,g as pe,h as he,i as fe,u as ye,j as ge,r as C,k as t,l as G,m as H,T as Ce,F as K,I as V,n as i,o as J,p as B,q as Y,s as ve,t as be,G as u,v as Se,w as xe,B as E,D as Fe,x as $e,y as Ae,z as I,A as R,C as f,E as we,H as Be,J as Le,L as P,K as De,M as qe,N as Te,O as _e,P as ke,S as Ee,Q as Ie,R as Re,U as Pe,V as Me,W as Ne,X as Oe,Y as ze,Z as je,_ as Ue,$ as We,a0 as Ge}from"./vendor.e2a1a23b.js";const He=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}};He();const Z="contactRecords",X=["name","date"],Ke=w({id:d().required(),name:d().defined().required(),username:d().required(),email:d().email().required(),address:w({streetA:d().required(),streetB:d(),streetC:d(),streetD:d(),city:d().required(),state:d(),zipcode:d().required().matches(/^[0-9A-Z\-\ ]{3,10}$/),country:d().required()}),phone:d(),website:d(),favorite:W().default(!1)}),Q=w({name:d().required("Please fill in the name"),username:d().required("Please provide a username"),email:d().email("Please provide a valid email address").required("Please provide an email address"),phone:d().optional(),website:d().optional().matches(/^((https?:\/\/)?([a-z0-9]+\.){1,3}[a-z]+)?$/,"Please provide a valid URL"),address:w({localAddress:_().of(d().required()).min(1).max(4).required().defined().default([]),city:d().required("Please provide the city name"),state:d(),zipcode:d().required("Please fill in the postal code").matches(/^[0-9A-Z\-\ ]{3,10}$/,"Please enter a valid postal code"),country:d().required("Please specify the country")})}),Ve=w({contact:Q,id:d().required(),isFavorite:W().required(),modifiedTimestamp:me().required()}),ee="contactBook_",Je=e=>{const n=localStorage.getItem(`${ee}${e}`);return n&&JSON.parse(n)},Ye=(e,n)=>{localStorage.setItem(`${ee}${e}`,JSON.stringify(n))},Ze=()=>{try{const e=Je(Z);return _().of(Ve.required()).nullable().validateSync(e,{stripUnknown:!0})||null}catch(e){return console.error(e),null}},{reducer:Xe,actions:Qe}=k({name:"contacts",initialState:Ze,reducers:{loadContacts(e,n){return n.payload},addContact(e,n){const{timestamp:r,contact:a}=n.payload;e==null||e.push({id:Math.floor(Math.random()*10**6).toString(),modifiedTimestamp:r,isFavorite:!1,contact:a})},updateContact(e,n){const{id:r,timestamp:a,contact:o}=n.payload,s=e==null?void 0:e.find(c=>c.id===r);!s||(s.modifiedTimestamp=a,s.contact=pe(s.contact,o,{arrayMerge:(c,p)=>p}))},deleteContact(e,n){return e==null?void 0:e.filter(r=>r.id!==n.payload)},setFavorite(e,n){const{id:r,isFavorite:a}=n.payload,o=e==null?void 0:e.find(s=>s.id===r);!o||(o.isFavorite=a)}}}),{loadContacts:et,addContact:tt,updateContact:nt,deleteContact:at,setFavorite:rt}=Qe,ot={sortedBy:"name",isDescending:!1},{reducer:st,actions:it}=k({name:"sorting",initialState:ot,reducers:{sortBy(e,n){e.sortedBy=n.payload},setDirection(e,n){e.isDescending=n.payload}}}),{sortBy:ct,setDirection:lt}=it,dt={search:"",onlyFavorites:!1},{reducer:ut,actions:mt}=k({name:"filters",initialState:dt,reducers:{setSearch(e,n){e.search=n.payload},setOnlyFavorites(e,n){e.onlyFavorites=n.payload}}}),{setSearch:pt,setOnlyFavorites:ht}=mt,ft=({dispatch:e,getState:n})=>r=>a=>{switch(r(a),a.type){case"contacts/loadContacts":case"contacts/addContact":case"contacts/updateContact":case"contacts/deleteContact":case"contacts/setFavorite":Ye(Z,n().contacts);break}},yt=he({contacts:Xe,sorting:st,filters:ut}),gt=fe({reducer:yt,middleware:e=>[...e(),ft]}),L=ge,x=()=>ye(),Ct="https://demo.sibers.com/users",vt=e=>{const h=e.address,{streetA:n,streetB:r,streetC:a,streetD:o}=h,s=A(h,["streetA","streetB","streetC","streetD"]),c=[n,r,a,o].flatMap(g=>g?[g]:[]),y=S(b({},e),{address:S(b({},s),{localAddress:c})}),{favorite:p,id:m}=y;return{contact:A(y,["favorite","id"]),id:m,isFavorite:p,modifiedTimestamp:Date.now()}},bt=async()=>{const e=await(await fetch(Ct)).json();return(await _().required().validate(e)).flatMap(r=>{try{let a=Ke.validateSync(r,{stripUnknown:!0});return vt(a)}catch(a){return console.error(a),[]}})};function St(){const e=x(),n=L(r=>r.contacts);C.exports.useEffect(()=>{n||bt().then(r=>{e(et(r))})},[])}const M=C.exports.createContext(1);function F({children:e}){const n=C.exports.useContext(M)||1;return t(M.Provider,{value:n+1,children:e})}const xt=["h1","h2","h3","h4","h5","h6"];function $(r){var a=r,{children:e}=a,n=A(a,["children"]);const o=Math.max(Math.min(C.exports.useContext(M),6),1)||1,s=xt[o-1];return t(s,S(b({},n),{children:e}))}const Ft=e=>e.contacts,te=e=>e.filters,N=e=>e.sorting,$t=G([Ft,te],(e,{search:n,onlyFavorites:r})=>e&&e.filter(a=>a.contact.name.toLowerCase().includes(n.toLowerCase())&&(!r||a.isFavorite))),At=G([$t,N],(e,{sortedBy:n,isDescending:r})=>e&&e.slice().sort((a,o)=>{const[s,c]=[a.contact.name.toLowerCase(),o.contact.name.toLowerCase()];let p=0;switch(n){case"name":p=s<c?-1:s>c?1:0;break;case"date":p=a.modifiedTimestamp-o.modifiedTimestamp}return r?-p:p}));function v(c){var p=c,{name:e,label:n,color:r,unselectable:a,size:o}=p,s=A(p,["name","label","color","unselectable","size"]);const[m,l,h]=H(e);return t(Ce,S(b(b({},m),s),{label:n,error:!!(l.error&&l.touched),helperText:l.touched?l.error:null,fullWidth:!0,margin:"normal"}))}function wt({name:e,onAddLine:n,onRemoveLine:r}){const[a,o,s]=H(e);return t(K,{fullWidth:!0,margin:"dense",children:t(V,S(b({},a),{endAdornment:i(J,{position:"end",children:[t(B,{onClick:n,"aria-label":"Add line",size:"small",children:t(Y,{})}),t(B,{onClick:r,"aria-label":"Remove line",size:"small",children:t(ve,{})})]})}))})}const Bt={name:"",email:"",username:"",address:{localAddress:[""],city:"",state:"",zipcode:"",country:""},phone:"",website:""};function Lt({initialValue:e=Bt,onSubmit:n}){return t(be,{initialValues:e,onSubmit:n,validationSchema:Q,validateOnChange:!1,children:({handleSubmit:r,values:a,errors:o})=>i("form",{onSubmit:r,noValidate:!0,children:[t(v,{name:"name",label:"Name"}),i(u,{container:!0,spacing:1,children:[t(u,{item:!0,xs:12,sm:6,children:t(v,{name:"username",type:"text",label:"Username"})}),t(u,{item:!0,xs:12,sm:6,children:t(v,{name:"email",type:"email",label:"Email"})})]}),i(u,{container:!0,spacing:1,children:[t(u,{item:!0,xs:12,sm:6,children:t(v,{name:"phone",type:"tel",label:"Phone number"})}),t(u,{item:!0,xs:12,sm:6,children:t(v,{name:"website",type:"url",label:"Website"})})]}),i(K,{component:"fieldset",margin:"normal",fullWidth:!0,children:[t(Se,{component:"legend",children:"Address"}),t(xe,{name:"address.localAddress",children:({remove:s,insert:c})=>a.address.localAddress.map((p,m)=>t(wt,{name:`address.localAddress[${m}]`,onAddLine:()=>a.address.localAddress.length<4&&c(m+1,""),onRemoveLine:()=>a.address.localAddress.length>1&&s(m)},m))}),i(u,{container:!0,spacing:1,children:[t(u,{item:!0,xs:12,sm:6,children:t(v,{name:"address.city",type:"text",label:"City"})}),t(u,{item:!0,xs:12,sm:6,children:t(v,{name:"address.state",type:"text",label:"State or province"})})]}),i(u,{container:!0,spacing:1,children:[t(u,{item:!0,xs:12,sm:6,children:t(v,{name:"address.zipcode",type:"text",label:"Postal code"})}),t(u,{item:!0,xs:12,sm:6,children:t(v,{name:"address.country",type:"text",label:"Country"})})]})]}),t(E,{variant:"contained",color:"primary",type:"submit",children:"Save"})]})})}function ne({show:e,onClose:n,onSubmit:r,initialValue:a}){return i(Fe,{open:e,onClose:n,children:[i($e,{children:[a?"Edit":"Add"," contact"]}),t(Ae,{children:t(Lt,{initialValue:a,onSubmit:o=>{r(o),n()}})})]})}const Dt=I(e=>({card:{maxWidth:"400px"},icon:{fill:e.palette.text.secondary,marginRight:e.spacing(1),width:"20px",height:"20px",verticalAlign:"middle"}}));function qt({record:e,onEditContact:n}){const r=Dt(),a=x(),{id:o,contact:{name:s,email:c,username:p,phone:m,website:l,address:h},isFavorite:y}=e,[g,q]=C.exports.useState(!1),{localAddress:re,city:oe,state:O,zipcode:se,country:ie}=h,ce=t("address",{children:[...re,`${oe}${O?`, ${O}`:""}`,se,ie].filter(Boolean).map(T=>i(R,{children:[t(f,{variant:"body2",component:"span",children:T}),t("br",{})]}))});return i("article",{className:r.card,children:[i(u,{container:!0,justifyContent:"space-between",alignItems:"flex-start",wrap:"nowrap",component:"header",children:[i(f,{variant:"body1",component:$,gutterBottom:!0,children:[s," ",i(f,{variant:"body1",component:"span",color:"textSecondary",children:["(",p,")"]})]}),t(B,{size:"small",color:y?"primary":"default",onClick:()=>a(rt({id:o,isFavorite:!y})),"aria-label":y?"unfavorite":"favorite",children:y?t(we,{}):t(Be,{})})]}),i(F,{children:[i(u,{container:!0,justifyContent:"space-between",alignItems:"flex-end",children:[i(u,{item:!0,children:[i(f,{variant:"body2",gutterBottom:!0,children:[t(Le,{className:r.icon}),t(P,{href:`mailto:${c}`,children:c})]}),m&&t(f,{variant:"body2",gutterBottom:!0,children:i(P,{href:`tel:${m}`,children:[t(De,{className:r.icon}),m]})}),l&&t(f,{variant:"body2",gutterBottom:!0,children:i(P,{href:`https://${l.replace(/^https?:\/\//,"")}`,children:[t(qe,{className:r.icon}),l.replace(/^https?:\/\//,"")]})})]}),t(u,{item:!0,children:t(B,{onClick:()=>q(T=>!T),size:"small","aria-label":g?"more":"less",children:g?t(Te,{}):t(_e,{})})})]}),i(ke,{in:g,children:[ce,t(E,{color:"primary",onClick:()=>n(o),children:"Edit"}),t(E,{color:"primary",onClick:()=>a(at(o)),children:"Delete"})]})]})]})}const Tt=I(e=>({contactList:{margin:0,padding:`0 0 0 ${e.spacing(2)}px`,listStyle:"none"},contactItem:{marginBottom:e.spacing(3)}}));function ae({records:e,onEditContact:n}){const r=Tt();return t("ul",{className:r.contactList,children:e.map(a=>t("li",{className:r.contactItem,children:t(qt,{record:a,onEditContact:n})},a.id))})}const _t=I(e=>({groupTitle:{borderBottom:`1px solid ${e.palette.divider}`,marginTop:e.spacing(3),marginBottom:e.spacing(2)}}));function kt({items:e,alphabetization:n,reverse:r=!1,children:a}){const o=_t(),s=C.exports.useMemo(()=>{const c=[],p=e.slice().sort((m,l)=>{const[h,y]=[m,l].map(q=>n(q).toLowerCase()),g=h<y?-1:h>y?1:0;return r?-g:g});for(const m of p){const l=n(m)[0].toUpperCase()||null;let h=c[c.length-1];!h||h.initial!==l?(h={initial:(l==null?void 0:l.toUpperCase())||null,items:[m]},c.push(h)):h.items.push(m)}return c},[e,n]);return t(R,{children:s.map(c=>i(C.exports.Fragment,{children:[t(f,{variant:"h6",component:$,className:o.groupTitle,children:c.initial}),t(F,{children:a(c.items)})]},c.initial))})}function Et(){var m;const e=x(),{sortedBy:n,isDescending:r}=L(N),a=L(At),[o,s]=C.exports.useState(null),c=l=>{!o||(e(nt({id:o,contact:l,timestamp:Date.now()})),s(null))},p=n==="name";return i(R,{children:[t(ne,{show:o!==null,onClose:()=>s(null),onSubmit:c,initialValue:(m=a==null?void 0:a.find(l=>l.id===o))==null?void 0:m.contact}),a&&(p?t(kt,{items:a,alphabetization:l=>l.contact.name,reverse:r,children:l=>t(ae,{records:l,onEditContact:h=>s(h)})}):t(ae,{records:a,onEditContact:l=>s(l)}))]})}function It(){const e=x(),{sortedBy:n,isDescending:r}=L(N),a=s=>{let c=X.find(p=>p===s);!c||e(ct(c))},o=()=>e(lt(!r));return i("form",{children:[t(Ee,{labelId:"sort-option-select-label",id:"sort-option-select",value:n,onChange:s=>a(s.target.value),children:X.map(s=>i(Ie,{value:s,children:["By ",s]},s))}),t(B,{type:"button",onClick:o,size:"small",children:r?t(Re,{}):t(Pe,{})})]})}function Rt(){const e=x(),{search:n,onlyFavorites:r}=L(te);return i("form",{children:[t(V,{type:"text",value:n,onChange:a=>e(pt(a.target.value)),startAdornment:t(J,{position:"start",children:t(Me,{})}),fullWidth:!0}),t(Ne,{label:"Show favorites only",control:t(Oe,{color:"primary",checked:r,onChange:a=>e(ht(a.target.checked))})})]})}function Pt(){St();const e=x(),[n,r]=C.exports.useState(!1);return i(ze,{maxWidth:"md",children:[t(ne,{show:n,onClose:()=>r(!1),onSubmit:o=>{e(tt({timestamp:Date.now(),contact:o})),r(!1)}}),i(u,{container:!0,justifyContent:"space-between",children:[t(u,{item:!0,children:t(f,{variant:"h5",component:$,gutterBottom:!0,children:"My Contacts"})}),t(u,{item:!0,children:i(je,{variant:"extended",color:"primary",onClick:()=>r(!0),children:[t(Y,{}),"Add contact"]})})]}),t(F,{children:i(u,{container:!0,spacing:2,children:[i(u,{item:!0,xs:12,sm:4,md:3,component:"section",children:[t(f,{variant:"button",component:$,children:"Filter"}),t(F,{children:t(Rt,{})})]}),i(u,{item:!0,xs:12,sm:8,md:9,container:!0,spacing:2,children:[i(u,{item:!0,xs:12,component:"section",children:[t(f,{variant:"button",component:$,children:"Sort"}),t(F,{children:t(It,{})})]}),i(u,{item:!0,xs:12,component:"section",children:[t(f,{variant:"button",component:$,children:"Contact list"}),t(F,{children:t(Et,{})})]})]})]})})]})}Ue.render(t(We.StrictMode,{children:t(Ge,{store:gt,children:t(Pt,{})})}),document.getElementById("root"));
